# Journal: 2026-02-11 Evening — Training Live + wandb Dashboard

## Summary

Evening session: got SentinelNet training running stable on XPS, set up wandb experiment tracking with offline sync pipeline, and resolved multiple DataLoader and connectivity issues.

## Training Status (as of ~21:00 PST)

- **Epoch:** 8/50 in progress
- **Accuracy:** 98.43% (train)
- **Loss:** 0.0390
- **Speed:** ~84 it/s (~1.5 min/epoch)
- **Loss progression:** 2.7 → 0.17 (ep1) → 0.058 (ep2) → 0.045 (ep4) → 0.040 (ep7) → 0.039 (ep8)
- **ETA:** ~1 hour remaining for 50 epochs

Model is converging well. Loss dropped 98.5% in first 2 epochs, now in fine-tuning phase. No signs of overfitting yet (need val metrics to confirm).

## What Got Done

### Training Pipeline
- **DataLoader fix:** Changed `num_workers=2` → `num_workers=0` in `preprocessing/pipeline.py`. PyTorch multiprocessing IPC crashes on WSL2 5.15 kernel with `ConnectionResetError`. Slightly slower throughput but 100% stable.
- **pyarrow installed:** Required for parquet loading in the pipeline.
- **Training launched:** `nohup` with offline wandb, batch_size=256, 50 epochs on CUDA.
- **Data split:** 1,979,513 train / 424,181 val / 424,182 test (2.83M total)

### wandb Experiment Tracking
- **Problem:** XPS can't reach `api.wandb.ai` due to NordVPN DNS interference.
- **Solution:** Offline mode on XPS → rsync to ThinkStation → `wandb sync` to cloud.
- **Dashboard:** https://wandb.ai/jag927-nasa/sentinelnet/runs/rp9sfghv
- **Run ID:** `offline-run-20260211_203727-rp9sfghv`
- **Sync command:**
  ```bash
  rsync -av rjgar@192.168.2.71:~/workspace/projects/sentinelnet/wandb/ \
    ~/workspace/projects/sentinelnet/wandb/
  wandb sync wandb/offline-run-20260211_203727-rp9sfghv/ \
    --project sentinelnet --entity jag927-nasa
  ```

### Key Metrics to Watch
| Metric | Current | Target | Red Flag |
|--------|---------|--------|----------|
| Train accuracy | 98.43% | >97% | — |
| Val accuracy | TBD | >97% | train-val gap >5% |
| Loss | 0.039 | <0.05 | Rising after plateau |

## Decisions
- **wandb offline + sync:** Pragmatic workaround for XPS DNS issues. Works well enough.
- **num_workers=0:** Performance hit is ~10-15% but eliminates crashes entirely. Worth it on this kernel.
- **batch_size=256:** Good balance for 8GB VRAM. No OOM issues.

## Next Steps
1. Let training complete (~1 hour)
2. Sync final wandb results to dashboard
3. Evaluate val/test metrics
4. Export best model to ONNX
5. Deploy to pi2 inference server
6. Rotate exposed wandb + HuggingFace tokens
